# =============================================================================
# Financial Transaction Streaming Pipeline - Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

# Schema Registry
SCHEMA_REGISTRY_URL=http://localhost:8081
SCHEMA_REGISTRY_USERNAME=
SCHEMA_REGISTRY_PASSWORD=

# Topics
TRANSACTIONS_TOPIC=financial.transactions.raw
FRAUD_ALERTS_TOPIC=financial.fraud.alerts
DLQ_TOPIC=financial.transactions.dlq

# -----------------------------------------------------------------------------
# Snowflake Configuration
# -----------------------------------------------------------------------------
SNOWFLAKE_ACCOUNT=your-account.snowflakecomputing.com
SNOWFLAKE_USER=your-username
SNOWFLAKE_PASSWORD=your-password
SNOWFLAKE_ROLE=STREAMING_ROLE
SNOWFLAKE_WAREHOUSE=STREAMING_WH
SNOWFLAKE_DATABASE=FINANCIAL_DATA
SNOWFLAKE_SCHEMA=RAW

# Snowflake Schemas
SNOWFLAKE_BRONZE_SCHEMA=BRONZE
SNOWFLAKE_SILVER_SCHEMA=SILVER
SNOWFLAKE_GOLD_SCHEMA=GOLD

# -----------------------------------------------------------------------------
# AWS Configuration (Production)
# -----------------------------------------------------------------------------
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key

# S3 Configuration
S3_BUCKET_RAW=financial-streaming-raw
S3_BUCKET_PROCESSED=financial-streaming-processed
S3_CHECKPOINT_BUCKET=financial-streaming-checkpoints

# MSK Configuration (Production)
MSK_CLUSTER_ARN=arn:aws:kafka:us-west-2:123456789012:cluster/financial-streaming/12345678-1234-1234-1234-123456789012-1
MSK_BOOTSTRAP_SERVERS=b-1.financial-streaming.123456.c1.kafka.us-west-2.amazonaws.com:9092

# -----------------------------------------------------------------------------
# Spark Configuration
# -----------------------------------------------------------------------------
SPARK_APP_NAME=financial-transaction-processor
SPARK_MASTER=local[*]
SPARK_EXECUTOR_MEMORY=2g
SPARK_DRIVER_MEMORY=1g
SPARK_MAX_CORES=4

# Streaming Configuration
SPARK_STREAMING_CHECKPOINT_LOCATION=s3a://financial-streaming-checkpoints/spark-checkpoints
SPARK_STREAMING_TRIGGER_INTERVAL=30 seconds
SPARK_STREAMING_MAX_OFFSETS_PER_TRIGGER=10000
SPARK_STREAMING_WATERMARK_DELAY=2 hours

# -----------------------------------------------------------------------------
# Data Quality Configuration
# -----------------------------------------------------------------------------
GREAT_EXPECTATIONS_CONFIG_DIR=./great_expectations
DATA_QUALITY_ALERT_THRESHOLD=0.95
ENABLE_DATA_VALIDATION=true

# -----------------------------------------------------------------------------
# Security & Encryption
# -----------------------------------------------------------------------------
ENCRYPTION_KEY_ID=alias/financial-streaming-key
PII_MASKING_ENABLED=true
AUDIT_LOGGING_ENABLED=true

# Customer ID Hashing
CUSTOMER_ID_SALT=your-random-salt-here
HASH_ALGORITHM=SHA256

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091
METRICS_ENABLED=true
LOGGING_LEVEL=INFO
STRUCTURED_LOGGING=true

# Alerting
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
EMAIL_ALERTS_ENABLED=false
ALERT_EMAIL_RECIPIENTS=alerts@yourcompany.com

# -----------------------------------------------------------------------------
# Development & Testing
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG_MODE=false
ENABLE_PERFORMANCE_METRICS=true

# Transaction Generator
TRANSACTION_RATE_PER_SECOND=100
FRAUD_INJECTION_RATE=0.05
SIMULATE_LATE_ARRIVALS=true
LATE_ARRIVAL_PROBABILITY=0.02

# -----------------------------------------------------------------------------
# Database Configuration (for metadata and state)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://streaming_user:streaming_pass@localhost:5432/streaming_metadata
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Feature Engineering
# -----------------------------------------------------------------------------
VELOCITY_WINDOW_HOURS=1,6,24
GEOGRAPHIC_ANOMALY_THRESHOLD=100
AMOUNT_ANOMALY_STD_THRESHOLD=3.0
MERCHANT_RISK_SCORE_THRESHOLD=0.7

# -----------------------------------------------------------------------------
# Cost Optimization
# -----------------------------------------------------------------------------
SNOWFLAKE_AUTO_SUSPEND_MINUTES=5
SPARK_DYNAMIC_ALLOCATION_ENABLED=true
S3_INTELLIGENT_TIERING_ENABLED=true
